{% extends 'base.html.twig' %}
{% block title %}Mon Panier{% endblock %}

{% block body %}
  <h1>Votre panier</h1>
  <a href="{{ path('produit_index') }}">‚Üê Continuer vos achats</a>

  {% if cart.items|length == 0 %}
    <p>Votre panier est vide.</p>
  {% else %}
    <table class="table-auto w-full mt-4">
      <thead class="bg-gray-200">
        <tr><th>Produit</th><th>Quantit√©</th><th>Sous-total</th><th>Actions</th></tr>
      </thead>
      <tbody>
        {% for item in cart.items %}
        <tr>
          <td>{{ item.produit.nom }}</td>
          <td>
            <form method="post" action="{{ path('cart_update', { id: item.id }) }}" style="display:inline">
              <input type="number" name="quantity" value="{{ item.quantity }}" min="1" class="w-16">
              <button type="submit">‚Üª</button>
            </form>
          </td>
          <td>{{ (item.quantity * item.produit.prixUnitaire)|number_format(2, ',', ' ') }} ‚Ç¨</td>
          <td>
            <a href="{{ path('cart_remove', { id: item.id }) }}">üóëÔ∏è</a>
          </td>
        </tr>
        {% endfor %}
        <tr class="font-bold">
          <td colspan="2">Total</td>
          <td>{{ cart.getTotal()|number_format(2, ',', ' ') }} ‚Ç¨</td>
          <td></td>
        </tr>
      </tbody>
    </table>

    <div class="mt-4">
      <a href="{{ path('cart_checkout') }}" class="btn btn-primary">Passer la commande</a>
    </div>
  {% endif %}
{% endblock %}
